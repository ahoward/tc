# Implementation Plan: Test-Kit Integration with Spec-Kit

**Branch**: `008-explore-the-strategy` | **Date**: 2025-10-18 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/008-explore-the-strategy/spec.md`

**Note**: This plan is generated by the `/speckit.plan` command. See `.specify/templates/commands/plan.md` for the execution workflow.

## Summary

Create tc-kit, a slash command companion to GitHub's spec-kit that generates language-agnostic acceptance tests from specifications using tc's pattern matching framework. Test-kit enables spec-driven development by providing `/tc.specify`, `/tc.refine`, and `/tc.validate` commands that generate, refine, and validate technology-agnostic test suites that remain stable across implementation technology changes (e.g., Python→Go→Rust).

**Core Innovation**: Tests evolve through maturity levels (concept→exploration→implementation) alongside code, maintaining bidirectional traceability between spec requirements and test scenarios.

## Technical Context

**Language/Version**: Bash 4.0+ (POSIX-compatible shell scripting for slash commands)
**Primary Dependencies**: tc framework (existing), jq (JSON processing), spec-kit markdown format (parsing)
**Storage**: `./tc/spec-kit/` directory for traceability.json, validation reports, maturity metadata
**Testing**: tc framework (dogfooding - tc-kit tests itself)
**Target Platform**: Linux/macOS with Bash 4.0+, compatible with spec-kit environments
**Project Type**: Single - slash command extensions to existing tc/spec-kit toolchain
**Performance Goals**:
  - Test generation: <30 seconds for complete spec
  - Test execution: <10 seconds for concept-level validation (5-10 user stories)
  - 90% spec→test mapping success rate
**Constraints**:
  - Must NOT modify tc or spec-kit codebases (standalone companion)
  - Must be POSIX-compatible for portability
  - Must support TTY/non-TTY output modes (CI/CD compatibility)
  - State must be regenerable (rm -rf tests safe)
**Scale/Scope**:
  - Target: 50+ user stories with graceful degradation
  - Performance warnings beyond 50 stories
  - Support multiple feature branches concurrently

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

**Status**: ⚠️  NO CONSTITUTION DEFINED

The project constitution file (`.specify/memory/constitution.md`) contains only template placeholders. No project-specific principles, constraints, or gates are established.

**Recommendation**: This feature can proceed without formal constitution gates, but consider establishing constitution principles for:
1. **Test-First Development** - Given tc-kit's purpose
2. **Backward Compatibility** - tc and spec-kit integration contracts
3. **Performance Bounds** - Generation and execution time limits
4. **Simplicity** - POSIX-compatible, minimal dependencies

**Gate Decision**: PASS (proceed with planning) - No constitution violations possible when constitution undefined.

## Project Structure

### Documentation (this feature)

```
specs/008-explore-the-strategy/
├── spec.md              # Feature specification (complete)
├── plan.md              # This file (/speckit.plan output)
├── research.md          # Phase 0 output (technical decisions)
├── data-model.md        # Phase 1 output (entities and relationships)
├── quickstart.md        # Phase 1 output (developer guide)
├── contracts/           # Phase 1 output (slash command interfaces)
│   ├── tc-kit-specify.md
│   ├── tc-kit-refine.md
│   └── tc-kit-validate.md
├── checklists/          # Requirements quality validation
│   └── test-generation.md
└── tasks.md             # Phase 2 output (/speckit.tasks - NOT created by /speckit.plan)
```

### Source Code (repository root)

```
# Slash command implementations (integrate with existing spec-kit structure)
.specify/
├── templates/
│   └── commands/
│       ├── tc-kit-specify.md    # Test generation command
│       ├── tc-kit-refine.md     # Test refinement command
│       └── tc-kit-validate.md   # Validation report command
└── scripts/
    └── bash/
        ├── tc-kit-specify.sh     # Test generation logic
        ├── tc-kit-refine.sh      # Refinement logic
        ├── tc-kit-validate.sh    # Validation logic
        └── tc-kit-common.sh      # Shared utilities

# Generated test structure (runtime output)
tc/
├── tests/
│   └── {feature-name}/            # Feature-rooted test suites
│       └── user-story-{n}/        # User story grouping
│           └── scenario-{n}/      # Individual test scenarios
│               ├── run            # Test runner script
│               └── data/
│                   ├── input.json
│                   └── expected.json
└── spec-kit/                      # Test-kit state directory
    ├── traceability.json          # Spec↔test bidirectional links
    ├── maturity.json              # Test maturity level tracking
    └── validation-report.json     # Latest validation results

# Existing tc framework (no modifications)
bin/tc                             # Existing test runner (unchanged)
lib/                               # tc framework libraries (unchanged)
```

**Structure Decision**: Single-project structure integrated with existing tc repository. Test-kit implemented as slash commands following spec-kit's pattern, storing state in `./tc/spec-kit/` to enable clean test regeneration. No modifications to tc or spec-kit core codebases (FR-016, FR-021).

## Complexity Tracking

*Fill ONLY if Constitution Check has violations that must be justified*

**Status**: N/A - No constitution violations (constitution undefined)
